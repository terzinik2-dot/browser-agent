# Browser Agent

AI-агент, который автономно управляет браузером для выполнения задач пользователя, используя Claude с vision capabilities.

## Как это работает

1. Пользователь описывает задачу текстом
2. Агент открывает браузер и делает скриншот
3. Находит все интерактивные элементы (кнопки, ссылки, поля ввода)
4. Рисует на скриншоте номера элементов (Set-of-Marks)
5. Отправляет скриншот Claude для анализа
6. Claude решает, какое действие выполнить (клик, ввод текста, скролл)
7. Агент выполняет действие
8. Цикл повторяется, пока задача не будет выполнена

## Требования

- Python 3.11 или выше
- Установленный Chromium через Playwright
- API ключ Anthropic

## Установка

### 1. Установите зависимости

```bash
pip install -r requirements.txt
```

Или вручную:

```bash
pip install playwright anthropic pillow rich
```

### 2. Установите браузер Chromium

```bash
playwright install chromium
```

### 3. Установите API ключ Anthropic

**Windows (CMD):**
```cmd
set ANTHROPIC_API_KEY=sk-ant-api03-...
```

**Windows (PowerShell):**
```powershell
$env:ANTHROPIC_API_KEY="sk-ant-api03-..."
```

**Linux/Mac:**
```bash
export ANTHROPIC_API_KEY=sk-ant-api03-...
```

## Запуск

### Интерактивный режим

```bash
python main.py
```

### С задачей в командной строке

```bash
python main.py "Перейди на google.com и найди погоду в Москве"
```

## Примеры задач

- **Поиск информации:**
  ```
  Найди на google.com информацию о курсе доллара
  ```

- **Поиск вакансий:**
  ```
  Зайди на hh.ru и найди вакансии Python-разработчика в Москве
  ```

- **Просмотр видео:**
  ```
  Открой youtube.com и найди видео про машинное обучение
  ```

- **Чтение статей:**
  ```
  Зайди на wikipedia.org и найди статью про нейронные сети
  ```

- **Покупки:**
  ```
  Зайди на ozon.ru и найди беспроводные наушники
  ```

## Архитектура

```
browser-agent/
├── main.py              # CLI интерфейс
├── agent.py             # Главный цикл агента
├── browser.py           # Playwright обёртка
├── vision.py            # Claude API с vision
├── markers.py           # Set-of-Marks: поиск элементов и разметка
├── tools.py             # Действия: click, type, scroll, goto
├── config.py            # Настройки
├── requirements.txt     # Зависимости
└── README.md            # Документация
```

## Действия агента

| Действие | Описание |
|----------|----------|
| `goto` | Переход на URL |
| `click` | Клик по элементу |
| `type` | Ввод текста в поле |
| `scroll` | Прокрутка страницы |
| `wait` | Ожидание загрузки |
| `done` | Задача выполнена |
| `ask` | Вопрос пользователю |

## Настройки

Настройки можно изменить в `config.py`:

- `model` - модель Claude (по умолчанию claude-sonnet-4-20250514)
- `max_steps` - максимум шагов (по умолчанию 50)
- `headless` - скрытый режим браузера (по умолчанию False)
- `viewport_width/height` - размер окна браузера

## Отладка

Для подробного вывода ошибок:

```bash
set DEBUG=1
python main.py
```

## Ограничения

- Агент работает только с веб-страницами (не с десктопными приложениями)
- Некоторые сайты могут блокировать автоматизацию
- Требуется активное интернет-соединение
- Claude API имеет лимиты на количество запросов

## Безопасность

- Агент НЕ сохраняет пароли и личные данные
- Все действия выполняются в видимом браузере
- Рекомендуется использовать для тестовых задач

## Лицензия

MIT
